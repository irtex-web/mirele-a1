"use strict";const CONFIG={modal:{width:800,height:600}},CompoundEditor=Project.export("editor",new app.interface({requires:{vue:!0,jquery:!0},elements:{vue:["#compound-editor"]},vue:{delimiters:["{","}"],el:"#compound-editor",data:{markup:[],selected:[],tools:{left:[{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!0,click:function(){}},{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!1,click:function(){}},{title:"...",icon:"dashicons dashicons-external",href:Compound.page_on_edit_url||!1,enabled:!0,click:function(){}}],right:[{title:"Remove selected templates",icon:"dashicons dashicons-trash",href:!1,enabled:!1,click:function(){return CompoundEditor.vue.transport().removeSelectedTemplates()}},{title:"Remove selected templates",icon:"dashicons dashicons-update",href:!1,enabled:!0,click:function(){return CompoundEditor.vue.reloadPage()}}]},ui:{notify:{type:"success",element:"[data-component=\"notify\"][data-namespace=\"editor\"][data-behavior=\"notify\"][data-role=\"notify\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},notify:function(a,b){this.type=(b||{}).type||"success",this.show(),"undefined"==typeof(b||{}).html?jQuery(this.element).text((b||{}).text||"Not defined"):jQuery(this.element).html((b||{}).html||"Not defined"),setTimeout(()=>{this.hide()},(b||{}).timeout||2500)}},loader:{element:"[data-component=\"spinner\"][data-namespace=\"editor\"][data-behavior=\"loader\"][data-role=\"loader\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},error:{element:"[data-component=\"error\"][data-namespace=\"editor\"][data-behavior=\"error\"][data-role=\"error\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},layout:{element:"[data-behavior=\"layout\"][data-namespace=\"editor\"][data-component=\"layout\"][data-role=\"layout\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},setSortable:function(a=!0){!0==a?jQuery(this.element).sortable("option","disabled",!1):!1==a&&jQuery(this.element).sortable("option","disabled",!0)},blur:function(){jQuery(this.element).blur(),jQuery(this.element).animate({opacity:.3})},focus:function(){jQuery(this.element).focus(),jQuery(this.element).animate({opacity:1})},getSelected:function(){return jQuery("[data-component=\"field-body\"][data-selected]").map((a,b)=>jQuery(b).attr("data-id")||0)||[]},mount:function(a){const b=this;jQuery(this.element).selectable({filter:"[data-component=\"field-body\"]",cancel:"[data-component=\"template-control\"],[data-component=\"field-component\"]",selected:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},selecting:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},unselected:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()},unselecting:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()}}),jQuery(this.element).sortable({axis:"xy",containment:"document",disabled:!0,placeholder:"__compound_box_placeholder",connectWith:jQuery("[data-behavior=\"droppable\"][data-namespace=\"editor\"]"),helper:"clone",opacity:.5,cursor:"move",forcePlaceholderSize:!0,revert:80,delay:0,update:function(){CompoundEditor.vue.updateOrder()},start:(b,c)=>{c.placeholder.height(c.item.height()),a.ui.trash.show(),a.ui.trash.mount()},stop:()=>{a.ui.layout.setSortable(!1),a.ui.trash.hide()}})},reset:function(){CompoundEditor.vue.selected=[],jQuery(this.element).selectable("refresh")}},body:{element:"[data-behavior=\"body\"][data-namespace=\"editor\"][data-component=\"body\"][data-role=\"body\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},trash:{element:"[data-behavior=\"trash\"][data-role=\"trash\"][data-component=\"trash\"][data-namespace=\"editor\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},mount:function(){return jQuery(this.element).droppable({accept:jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"),activeClass:"wp-mrl-trash-active",hoverClass:"__compound_box_action_unset_hover",drop:(a,b)=>{const c=jQuery(b.helper.context).attr("data-id")||!1;b.draggable.remove(),CompoundEditor.vue.removeTemplate({template:c}).then(()=>{})}})}}}},mounted:function(){this.updateMarkup().then(()=>{this.ui.loader.hide(this),this.ui.body.show(this),this.ui.layout.mount(this)}).catch(()=>{this.ui.loader.hide(this),this.ui.error.show(this)})},methods:{updateMarkup:function(){return new Promise((a,b)=>{app.request("Compound/getMarkup",{page:Compound.page_on_edit||0}).then(b=>{var c=[];for(const[a,d]of Object.entries(b.data))c.push({name:d.props.name||"default",id:a,fields:d.fields,props:d.props});this.markup=c,a(b.data)}).catch(a=>{b(a)})})},editProps:function(a){const b=app.references.form.get.component.props.vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertComponent:function(a){const b=app.references.form.insert.component.vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},editTemplate:function(a){const b=app.references.form.get.template.props.vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertTemplate:function(a){const b=app.references.form.insert.template.vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},removeTemplate:function(a){return app.request("Compound/removeTemplate",{page:Compound.page_on_edit||0,template:a.template})},reloadPage:function(){this.ui.layout.blur(),this.updateMarkup().then(()=>{this.ui.layout.focus(),CompoundEditor.vue.ui.notify.notify(!1,{html:"<span class=\"dashicons dashicons-saved\"></span> Changes have been successfully saved"})}).catch(()=>{this.ui.layout.focus()})},updateOrder:function(){var a=[];for(const[b,c]of Object.entries(jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"))){const b=jQuery(c).attr("data-id");b&&a.push(b)}app.request("Compound/sortOrder",{page:Compound.page_on_edit||0,order:a})},transport:function(){const a=CompoundEditor.vue;return{removeSelectedTemplates:function(){0<a.selected.length&&a.removeTemplate({template:a.selected}).then(()=>{a.ui.layout.reset(),a.reloadPage()})},removeTemplate:function(b){if(b.template){const c=app.request("Compound/removeTemplate",{page:Compound.page_on_edit||0,template:b.template});c.then(()=>{a.reloadPage()}).catch(()=>{})}},cloneTemplate:function(b){if(b.template){const c=app.request("Compound/cloneTemplate",{page:Compound.page_on_edit||0,template:b.template});c.then(()=>{a.reloadPage()}).catch(()=>{})}}}},__menuActionEditTemplate:function(){},__metaFieldClass__:function(a){const b=(a||{}).editor||{};return`__compound_field col-${b.col||12}`}},filters:{capitalize:function(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""}},watch:{selected:function(a){this.tools.right[0].enabled=!!(0<a.length)}}},ready:function(){document.addEventListener("keydown",a=>{const b=a.key||"",c=CompoundEditor.vue||{};"Delete"===b&&c.transport().removeSelectedTemplates()});Project.export("page-meta",new app.interface({requires:{vue:!0,jquery:!0},elements:{vue:["#compound-meta"]},vue:{delimiters:["{","}"],el:"#compound-meta",data:{updated:!0,meta:[]},mounted:function(){const a=this;app.request("Compound/getPage",{page:Compound.page_on_edit||0}).then(b=>{a.meta=b.data})},methods:{submit:function(){this.__show_loader();var a={};jQuery(jQuery("#compound-meta").serializeArray()).each(function(b,c){a[c.name]=c.value}),app.request("Compound/updatePage",{props:a,page:Compound.page_on_edit||0}).then(a=>{console.log(a.data),this.__hide_loader()})},__is_updated:function(){return this.updated},__show_loader:function(){return this.updated=!1},__hide_loader:function(){return this.updated=!0}},filters:{},watch:{}}}))}}));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxDQUN2QixNQUFPLE1BQUssT0FBTCxHQUNWLENBN0JJLENBK0JMLGFBQWEsQ0FBRSxVQUFZLENBQ3ZCLE1BQU8sTUFBSyxPQUFMLEdBQ1YsQ0FqQ0ksQ0FsQlIsQ0FzREQsT0FBTyxDQUFFLEVBdERSLENBdURELEtBQUssQ0FBRSxFQXZETixDQVIwRCxDQUFsQixDQUE1QixDQW1FeEIsQ0EzZjZELENBQWxCLENBQXpCLEMiLCJmaWxlIjoiY29tcG91bmQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBXZWxjb21lIHRvIHRoZSBzb3VyY2UgY29kZVxuICpcbiAqIOKWiOKWiOKWiOKVl+KWkeKWkeKWkeKWiOKWiOKWiOKVl+KWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVl+KWkeKWkeKWkeKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICAg4paR4paR4paR4paR4paR4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWXXG4gKiDilojilojilojilojilZfilpHilojilojilojilojilZHilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZHilpHilpHilpHilpHilpHilojilojilZTilZDilZDilZDilZDilZ0gICAgICAgIOKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnVxuICog4paI4paI4pWU4paI4paI4paI4paI4pWU4paI4paI4pWR4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4pWR4paR4paR4paR4paR4paR4paI4paI4paI4paI4paI4pWX4paR4paRICAgICAgICDilpHilpHilpHilpHilpHilojilojilZHilZrilojilojilojilojilojilZfilpFcbiAqIOKWiOKWiOKVkeKVmuKWiOKWiOKVlOKVneKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVneKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVlOKVkOKVkOKVneKWkeKWkSAgICAgICAg4paI4paI4pWX4paR4paR4paI4paI4pWR4paR4pWa4pWQ4pWQ4pWQ4paI4paI4pWXXG4gKiDilojilojilZHilpHilZrilZDilZ3ilpHilojilojilZHilojilojilZHilojilojilZHilpHilpHilojilojilZHilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZcgICAgICAgIOKVmuKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnVxuICog4pWa4pWQ4pWd4paR4paR4paR4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdICAgICAgICDilpHilZrilZDilZDilZDilZDilZ3ilpHilZrilZDilZDilZDilZDilZDilZ3ilpFcbiAqXG4gKiDilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilZfilpHilojilojilojilZfilpHilpHilpHilojilojilojilZfilojilojilZfilojilojilojilZfilpHilpHilojilojilZfilojilojilZfilpHilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilZfilpHilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilojilojilZfilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilZfilpFcbiAqIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl1xuICog4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWU4paI4paI4paI4paI4pWU4paI4paI4pWR4paI4paI4pWR4paI4paI4pWU4paI4paI4pWX4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4paI4paI4paI4pWX4paR4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWdXG4gKiDilojilojilZTilZDilZDilojilojilZHilojilojilZHilpHilpHilojilojilZHilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZHilojilojilZHilZrilojilojilojilojilZHilojilojilZHilpHilZrilZDilZDilZDilojilojilZfilpHilpHilpHilojilojilZHilpHilpHilpHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilojilojilZHilojilojilZTilZDilZDilojilojilZdcbiAqIOKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWkeKVmuKVkOKVneKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKVmuKWiOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKVmuKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkVxuICog4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWd4paR4paR4paR4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paR4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWdXG4gKlxuICpcbiAqXG4gKiBAcGFja2FnZSBNaXJlbGVcbiAqIEBhdXRob3IgTWlyZWxlXG4gKiBAdmVyc2lvbiAxLjAuMFxuICpcbiAqIEBzZWUgaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IENPTkZJRyA9IHtcbiAgICBtb2RhbDoge1xuICAgICAgICB3aWR0aDogODAwLFxuICAgICAgICBoZWlnaHQ6IDYwMFxuICAgIH1cbn07XG5cbmNvbnN0IENvbXBvdW5kRWRpdG9yID0gUHJvamVjdC5leHBvcnQoJ2VkaXRvcicsIG5ldyBhcHAuaW50ZXJmYWNlKHtcbiAgICByZXF1aXJlczoge1xuICAgICAgICB2dWU6IHRydWUsXG4gICAgICAgIGpxdWVyeTogdHJ1ZVxuICAgIH0sXG4gICAgZWxlbWVudHM6IHtcbiAgICAgICAgdnVlOiBbJyNjb21wb3VuZC1lZGl0b3InXVxuICAgIH0sXG4gICAgdnVlOiB7XG4gICAgICAgIGRlbGltaXRlcnM6IFsneycsICd9J10sXG4gICAgICAgIGVsOiBcIiNjb21wb3VuZC1lZGl0b3JcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbWFya3VwOiBbXSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICAgICAgICAgIHRvb2xzOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLXBsdXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLWV4dGVybmFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdF91cmwgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUmVtb3ZlIHNlbGVjdGVkIHRlbXBsYXRlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy10cmFzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29tcG91bmRFZGl0b3IudnVlLnRyYW5zcG9ydCgpLnJlbW92ZVNlbGVjdGVkVGVtcGxhdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdSZW1vdmUgc2VsZWN0ZWQgdGVtcGxhdGVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLXVwZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDb21wb3VuZEVkaXRvci52dWUucmVsb2FkUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVpOiB7XG4gICAgICAgICAgICAgICAgbm90aWZ5OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWNvbXBvbmVudD1cIm5vdGlmeVwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXVtkYXRhLWJlaGF2aW9yPVwibm90aWZ5XCJdW2RhdGEtcm9sZT1cIm5vdGlmeVwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IChldmVudCB8fCB7fSkudHlwZSB8fCAnc3VjY2Vzcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoZXZlbnQgfHwge30pLmh0bWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuaHRtbCgoZXZlbnQgfHwge30pLmh0bWwgfHwgJ05vdCBkZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnRleHQoKGV2ZW50IHx8IHt9KS50ZXh0IHx8ICdOb3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChldmVudCB8fCB7fSkudGltZW91dCB8fCAyNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1jb21wb25lbnQ9XCJzcGlubmVyXCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdW2RhdGEtYmVoYXZpb3I9XCJsb2FkZXJcIl1bZGF0YS1yb2xlPVwibG9hZGVyXCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAnW2RhdGEtY29tcG9uZW50PVwiZXJyb3JcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1iZWhhdmlvcj1cImVycm9yXCJdW2RhdGEtcm9sZT1cImVycm9yXCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWJlaGF2aW9yPVwibGF5b3V0XCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdW2RhdGEtY29tcG9uZW50PVwibGF5b3V0XCJdW2RhdGEtcm9sZT1cImxheW91dFwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0U29ydGFibGU6IGZ1bmN0aW9uIChib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW4gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNvcnRhYmxlKFwib3B0aW9uXCIsIFwiZGlzYWJsZWRcIiwgIXRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib29sZWFuID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuc29ydGFibGUoXCJvcHRpb25cIiwgXCJkaXNhYmxlZFwiLCAhZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuM1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VsZWN0ZWQ6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkZWxlbWVudCA9ICdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZC1ib2R5XCJdW2RhdGEtc2VsZWN0ZWRdJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeSgkZWxlbWVudCkubWFwKChpLCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeShlbGVtZW50KS5hdHRyKCdkYXRhLWlkJykgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vdW50OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNlbGVjdGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogJ1tkYXRhLWNvbXBvbmVudD1cImZpZWxkLWJvZHlcIl0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbDogJ1tkYXRhLWNvbXBvbmVudD1cInRlbXBsYXRlLWNvbnRyb2xcIl0sW2RhdGEtY29tcG9uZW50PVwiZmllbGQtY29tcG9uZW50XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodWkuc2VsZWN0ZWQpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGluZzogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodWkuc2VsZWN0ZWQpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWQ6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHVpLnVuc2VsZWN0ZWQpLnJlbW92ZUF0dHIoJ2RhdGEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0aW5nOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh1aS51bnNlbGVjdGVkKS5yZW1vdmVBdHRyKCdkYXRhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQgPSBjb250ZXh0LmdldFNlbGVjdGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5zb3J0YWJsZSh7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzOiBcInh5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2xlcmFuY2U6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIl9fY29tcG91bmRfYm94X3BsYWNlaG9sZGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdFdpdGg6IGpRdWVyeSgnW2RhdGEtYmVoYXZpb3I9XCJkcm9wcGFibGVcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXI6ICdjbG9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VQbGFjZWhvbGRlclNpemU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0OiA4MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAoZXZlbnQsIHVpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnBsYWNlaG9sZGVyLmhlaWdodCh1aS5pdGVtLmhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS50cmFzaC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudWkudHJhc2gubW91bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3A6IChldmVudCwgdWkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS5sYXlvdXQuc2V0U29ydGFibGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpLnRyYXNoLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUuc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNlbGVjdGFibGUoXCJyZWZyZXNoXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1iZWhhdmlvcj1cImJvZHlcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1jb21wb25lbnQ9XCJib2R5XCJdW2RhdGEtcm9sZT1cImJvZHlcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRyYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1iZWhhdmlvcj1cInRyYXNoXCJdW2RhdGEtcm9sZT1cInRyYXNoXCJdW2RhdGEtY29tcG9uZW50PVwidHJhc2hcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vdW50OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkodGhpcy5lbGVtZW50KS5kcm9wcGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogalF1ZXJ5KCdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZFwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiAnd3AtbXJsLXRyYXNoLWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJDbGFzczogJ19fY29tcG91bmRfYm94X2FjdGlvbl91bnNldF9ob3ZlcicsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wOiAoZXZlbnQsIHVpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICR0ZW1wbGF0ZSA9IGpRdWVyeSh1aS5oZWxwZXIuY29udGV4dCkuYXR0cignZGF0YS1pZCcpIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5kcmFnZ2FibGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvdW5kRWRpdG9yLnZ1ZS5yZW1vdmVUZW1wbGF0ZSh7dGVtcGxhdGU6ICR0ZW1wbGF0ZX0pLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1vdW50ZWQ6IGZ1bmN0aW9uIChFdmVudCkge1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgpLnRoZW4oRGF0YSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVpLmxvYWRlci5oaWRlKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkuYm9keS5zaG93KHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkubGF5b3V0Lm1vdW50KHRoaXMpO1xuXG4gICAgICAgICAgICB9KS5jYXRjaChEYXRhID0+IHtcblxuICAgICAgICAgICAgICAgIHRoaXMudWkubG9hZGVyLmhpZGUodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5lcnJvci5zaG93KHRoaXMpO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG5cbiAgICAgICAgICAgIHVwZGF0ZU1hcmt1cDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWFpbiByZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIGFwcC5yZXF1ZXN0KCdDb21wb3VuZC9nZXRNYXJrdXAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMFxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKEV2ZW50ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRidWZmZXIgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaWQsIHRlbXBsYXRlXSBvZiBPYmplY3QuZW50cmllcyhFdmVudC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidWZmZXIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRlbXBsYXRlLnByb3BzLm5hbWUgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogdGVtcGxhdGUuZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogdGVtcGxhdGUucHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrdXAgPSAkYnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEV2ZW50LmRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKEV2ZW50ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoRXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZWRpdFByb3BzOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCAkZm9ybSA9IGFwcC5yZWZlcmVuY2VzLmZvcm0uZ2V0LmNvbXBvbmVudC5wcm9wcy52dWVcbiAgICAgICAgICAgICAgICAkZm9ybS5fX2VkaXRvciA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRmb3JtLm9wZW4oT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwXG4gICAgICAgICAgICAgICAgfSwgZXZlbnQpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluc2VydENvbXBvbmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgJGZvcm0gPSBhcHAucmVmZXJlbmNlcy5mb3JtLmluc2VydC5jb21wb25lbnQudnVlO1xuICAgICAgICAgICAgICAgICRmb3JtLl9fZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZvcm0ub3BlbihPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgfSwgZXZlbnQpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGVkaXRUZW1wbGF0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgJGZvcm0gPSBhcHAucmVmZXJlbmNlcy5mb3JtLmdldC50ZW1wbGF0ZS5wcm9wcy52dWU7XG4gICAgICAgICAgICAgICAgJGZvcm0uX19lZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiAkZm9ybS5vcGVuKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50KSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBpbnNlcnRUZW1wbGF0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgJGZvcm0gPSBhcHAucmVmZXJlbmNlcy5mb3JtLmluc2VydC50ZW1wbGF0ZS52dWU7XG4gICAgICAgICAgICAgICAgJGZvcm0uX19lZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiAkZm9ybS5vcGVuKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMCxcbiAgICAgICAgICAgICAgICB9LCBldmVudCkpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcmVtb3ZlVGVtcGxhdGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHAucmVxdWVzdCgnQ29tcG91bmQvcmVtb3ZlVGVtcGxhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogZXZlbnQudGVtcGxhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlbG9hZFBhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVpLmxheW91dC5ibHVyKClcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgpLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVpLmxheW91dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUudWkubm90aWZ5Lm5vdGlmeShmYWxzZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJzxzcGFuIGNsYXNzPVwiZGFzaGljb25zIGRhc2hpY29ucy1zYXZlZFwiPjwvc3Bhbj4gQ2hhbmdlcyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHNhdmVkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChFdmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWkubGF5b3V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1cGRhdGVPcmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkb3JkZXIgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBlbGVtZW50XSBvZiBPYmplY3QuZW50cmllcyhqUXVlcnkoJ1tkYXRhLWNvbXBvbmVudD1cImZpZWxkXCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0ICRpZCA9IGpRdWVyeShlbGVtZW50KS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcmRlci5wdXNoKCRpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBSZXF1ZXN0ID0gYXBwLnJlcXVlc3QoJ0NvbXBvdW5kL3NvcnRPcmRlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiAkb3JkZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRyYW5zcG9ydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSBDb21wb3VuZEVkaXRvci52dWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2VsZWN0ZWRUZW1wbGF0ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZVRlbXBsYXRlKHt0ZW1wbGF0ZTogc2VsZi5zZWxlY3RlZH0pLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpLmxheW91dC5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVGVtcGxhdGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgUmVxdWVzdCA9IGFwcC5yZXF1ZXN0KCdDb21wb3VuZC9yZW1vdmVUZW1wbGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBldmVudC50ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdC50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjbG9uZVRlbXBsYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFJlcXVlc3QgPSBhcHAucmVxdWVzdCgnQ29tcG91bmQvY2xvbmVUZW1wbGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBldmVudC50ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdC50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG5cbiAgICAgICAgICAgIF9fbWVudUFjdGlvbkVkaXRUZW1wbGF0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIF9fbWV0YUZpZWxkQ2xhc3NfXzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgJGV2ZW50ID0gZXZlbnQgfHwge307XG4gICAgICAgICAgICAgICAgY29uc3QgJGVkaXRvciA9ICRldmVudC5lZGl0b3IgfHwge307XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBfX2NvbXBvdW5kX2ZpZWxkIGNvbC0keyRlZGl0b3IuY29sIHx8IDEyfWA7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlcnM6IHtcbiAgICAgICAgICAgIGNhcGl0YWxpemU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiAnJ1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHdhdGNoOiB7XG4gICAgICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29scy5yaWdodFswXS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xzLnJpZ2h0WzBdLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlYWR5OiBmdW5jdGlvbiAoRXZlbnQsICQpIHtcblxuICAgICAgICAvLyBIb3RrZXkgcmVnaXN0cmF0aW9uXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBFdmVudCA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGtleSA9IEV2ZW50LmtleSB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSBDb21wb3VuZEVkaXRvci52dWUgfHwge307XG5cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiRGVsZXRlXCIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydCgpLnJlbW92ZVNlbGVjdGVkVGVtcGxhdGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1ldGEgaW5mb1xuICAgICAgICBjb25zdCBDb21wb3VuZE1ldGEgPSBQcm9qZWN0LmV4cG9ydCgncGFnZS1tZXRhJywgbmV3IGFwcC5pbnRlcmZhY2Uoe1xuICAgICAgICAgICAgcmVxdWlyZXM6IHtcbiAgICAgICAgICAgICAgICB2dWU6IHRydWUsXG4gICAgICAgICAgICAgICAganF1ZXJ5OiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgICAgICAgICB2dWU6IFsnI2NvbXBvdW5kLW1ldGEnXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZ1ZToge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlcnM6IFsneycsICd9J10sXG4gICAgICAgICAgICAgICAgZWw6IFwiI2NvbXBvdW5kLW1ldGFcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1ldGE6IFtdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb3VudGVkOiBmdW5jdGlvbiAoRXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICBhcHAucmVxdWVzdCgnQ29tcG91bmQvZ2V0UGFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tZXRhID0gRXZlbnQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1ldGhvZHM6IHtcblxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3Nob3dfbG9hZGVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcHJvcHMgPSB7fTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KGpRdWVyeSgnI2NvbXBvdW5kLW1ldGEnKS5zZXJpYWxpemVBcnJheSgpKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHByb3BzW29iai5uYW1lXSA9IG9iai52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAucmVxdWVzdCgnQ29tcG91bmQvdXBkYXRlUGFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogJHByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhFdmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faGlkZV9sb2FkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIF9faXNfdXBkYXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBfX3Nob3dfbG9hZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgX19oaWRlX2xvYWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmlsdGVyczoge30sXG4gICAgICAgICAgICAgICAgd2F0Y2g6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgIH1cbn0pKTsiXX0=
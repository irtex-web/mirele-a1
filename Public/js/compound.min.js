"use strict";const CONFIG={modal:{width:800,height:600}},CompoundEditor=Project.export("editor",new Interface({requires:{vue:!0,jquery:!0},elements:{vue:["#compound-editor"]},vue:{delimiters:["{","}"],el:"#compound-editor",data:{markup:[],selected:[],tools:{left:[{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!0,click:function(){}},{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!1,click:function(){}},{title:"...",icon:"dashicons dashicons-external",href:Compound.page_on_edit_url||!1,enabled:!0,click:function(){}}],right:[{title:"Remove selected templates",icon:"dashicons dashicons-trash",href:!1,enabled:!1,click:function(){return CompoundEditor.vue.transport().removeSelectedTemplates()}},{title:"Remove selected templates",icon:"dashicons dashicons-update",href:!1,enabled:!0,click:function(){return CompoundEditor.vue.transport().removeSelectedTemplates()}}]},ui:{notify:{element:"[data-component=\"notify\"][data-namespace=\"editor\"][data-behavior=\"notify\"][data-role=\"notify\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},notify:function(a,b){this.show(),"undefined"==typeof(b||{}).html?jQuery(this.element).text((b||{}).text||"Not defined"):jQuery(this.element).html((b||{}).html||"Not defined"),setTimeout(()=>{this.hide()},(b||{}).timeout||2500)}},loader:{element:"[data-component=\"spinner\"][data-namespace=\"editor\"][data-behavior=\"loader\"][data-role=\"loader\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},error:{element:"[data-component=\"error\"][data-namespace=\"editor\"][data-behavior=\"error\"][data-role=\"error\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},layout:{element:"[data-behavior=\"layout\"][data-namespace=\"editor\"][data-component=\"layout\"][data-role=\"layout\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},setSortable:function(a=!0){!0==a?jQuery(this.element).sortable("option","disabled",!1):!1==a&&jQuery(this.element).sortable("option","disabled",!0)},blur:function(){jQuery(this.element).blur(),jQuery(this.element).animate({opacity:.3})},focus:function(){jQuery(this.element).focus(),jQuery(this.element).animate({opacity:1})},getSelected:function(){return jQuery("[data-component=\"field-body\"][data-selected]").map((a,b)=>jQuery(b).attr("data-id")||0)||[]},mount:function(a){const b=this;jQuery(this.element).selectable({filter:"[data-component=\"field-body\"]",cancel:"[data-component=\"template-control\"],[data-component=\"field-component\"]",selected:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},selecting:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},unselected:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()},unselecting:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()}}),jQuery(this.element).sortable({axis:"xy",containment:"document",disabled:!0,placeholder:"__compound_box_placeholder",connectWith:jQuery("[data-behavior=\"droppable\"][data-namespace=\"editor\"]"),helper:"clone",opacity:.5,cursor:"move",forcePlaceholderSize:!0,revert:80,delay:0,update:function(){CompoundEditor.vue.updateOrder()},start:(b,c)=>{c.placeholder.height(c.item.height()),a.ui.trash.show(),a.ui.trash.mount()},stop:()=>{a.ui.layout.setSortable(!1),a.ui.trash.hide()}})},reset:function(){CompoundEditor.vue.selected=[],jQuery(this.element).selectable("refresh")}},body:{element:"[data-behavior=\"body\"][data-namespace=\"editor\"][data-component=\"body\"][data-role=\"body\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},trash:{element:"[data-behavior=\"trash\"][data-role=\"trash\"][data-component=\"trash\"][data-namespace=\"editor\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},mount:function(){return jQuery(this.element).droppable({accept:jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"),activeClass:"wp-mrl-trash-active",hoverClass:"__compound_box_action_unset_hover",drop:(a,b)=>{const c=jQuery(b.helper.context).attr("data-id")||!1;b.draggable.remove(),CompoundEditor.vue.removeTemplate({template:c}).then(()=>{})}})}}}},mounted:function(){this.updateMarkup().then(()=>{this.ui.loader.hide(this),this.ui.body.show(this),this.ui.layout.mount(this)}).catch(()=>{this.ui.loader.hide(this),this.ui.error.show(this)})},methods:{updateMarkup:function(){return new Promise((a,b)=>{new WPAjax("Compound-getMarkup",{page:Compound.page_on_edit||0}).then(b=>{var c=[];for(const[a,d]of Object.entries(b.data.data))c.push({name:d.props.name||"default",id:a,fields:d.fields,props:d.props});this.markup=c,a(b.data.data)}).catch(a=>{b(a)})})},editProps:function(a){const b=Project.import("@form-props").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertComponent:function(a){const b=Project.import("@form-createComponent").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertTemplate:function(a){const b=Project.import("@form-insertTemplate").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},removeTemplate:function(a){return new WPAjax("Compound-removeTemplate",{page:Compound.page_on_edit||0,template:a.template})},reloadPage:function(){this.ui.layout.blur(),this.updateMarkup().then(()=>{this.ui.layout.focus(),CompoundEditor.vue.ui.notify.notify(!1,{html:"<span class=\"dashicons dashicons-saved\"></span> Changes have been successfully saved"})}).catch(()=>{this.ui.layout.focus()})},updateOrder:function(){var a=[];for(const[b,c]of Object.entries(jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"))){const b=jQuery(c).attr("data-id");b&&a.push(b)}new WPAjax("Compound-sort",{page:Compound.page_on_edit||0,order:a})},transport:function(){const a=CompoundEditor.vue;return{removeSelectedTemplates:function(){0<a.selected.length&&a.removeTemplate({template:a.selected}).then(()=>{a.ui.layout.reset(),a.reloadPage()})},removeTemplate:function(b){if(b.template){const c=new WPAjax("Compound-removeTemplate",{page:Compound.page_on_edit||0,template:b.template});c.then(()=>{a.reloadPage()}).catch(()=>{})}}}},__menuActionEditTemplate:function(){},__metaFieldClass__:function(a){const b=(a||{}).editor||{};return`__compound_field col-${b.col||12}`}},filters:{capitalize:function(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""}},watch:{selected:function(a){this.tools.right[0].enabled=!!(0<a.length)}}},ready:function(){document.addEventListener("keydown",a=>{const b=a.key||"",c=CompoundEditor.vue||{};"Delete"===b&&c.transport().removeSelectedTemplates()})}}));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZmlsZSI6ImNvbXBvdW5kLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogV2VsY29tZSB0byB0aGUgc291cmNlIGNvZGVcbiAqXG4gKiDilojilojilojilZfilpHilpHilpHilojilojilojilZfilojilojilZfilojilojilojilojilojilojilZfilpHilojilojilojilojilojilojilojilZfilojilojilZfilpHilpHilpHilpHilpHilojilojilojilojilojilojilojilZcgICAgICAgIOKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKWiOKVl1xuICog4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4pWR4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWR4paR4paR4paR4paR4paR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWdICAgICAgICDilpHilpHilpHilpHilpHilojilojilZHilojilojilZTilZDilZDilZDilZDilZ1cbiAqIOKWiOKWiOKVlOKWiOKWiOKWiOKWiOKVlOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWkSAgICAgICAg4paR4paR4paR4paR4paR4paI4paI4pWR4pWa4paI4paI4paI4paI4paI4pWX4paRXG4gKiDilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZ3ilpHilpHilojilojilZHilpHilpHilpHilpHilpHilojilojilZTilZDilZDilZ3ilpHilpEgICAgICAgIOKWiOKWiOKVl+KWkeKWkeKWiOKWiOKVkeKWkeKVmuKVkOKVkOKVkOKWiOKWiOKVl1xuICog4paI4paI4pWR4paR4pWa4pWQ4pWd4paR4paI4paI4pWR4paI4paI4pWR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWXICAgICAgICDilZrilojilojilojilojilojilZTilZ3ilojilojilojilojilojilojilZTilZ1cbiAqIOKVmuKVkOKVneKWkeKWkeKWkeKWkeKWkeKVmuKVkOKVneKVmuKVkOKVneKVmuKVkOKVneKWkeKWkeKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSAgICAgICAg4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paRXG4gKlxuICog4paR4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4pWX4paR4paR4paR4paI4paI4paI4pWX4paI4paI4pWX4paI4paI4paI4pWX4paR4paR4paI4paI4pWX4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWX4paRXG4gKiDilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilojilojilojilojilZfilpHilojilojilojilojilZHilojilojilZHilojilojilojilojilZfilpHilojilojilZHilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilZrilZDilZDilojilojilZTilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZfilZrilZDilZDilojilojilZTilZDilZDilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZdcbiAqIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVlOKWiOKWiOKWiOKWiOKVlOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVlOKWiOKWiOKVl+KWiOKWiOKVkeKWiOKWiOKVkeKVmuKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnVxuICog4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4pWU4pWd4paI4paI4pWR4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4paI4paI4pWR4paI4paI4pWR4paR4pWa4pWQ4pWQ4pWQ4paI4paI4pWX4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXXG4gKiDilojilojilZHilpHilpHilojilojilZHilojilojilojilojilojilojilZTilZ3ilojilojilZHilpHilZrilZDilZ3ilpHilojilojilZHilojilojilZHilojilojilZHilpHilZrilojilojilojilZHilojilojilZHilojilojilojilojilojilojilZTilZ3ilpHilpHilpHilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilojilojilZHilojilojilZHilpHilpHilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilpHilZrilojilojilojilojilojilZTilZ3ilojilojilZHilpHilpHilojilojilZFcbiAqIOKVmuKVkOKVneKWkeKWkeKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVneKWkeKVmuKVkOKVneKWkeKWkeKWkeKWkeKWkeKVmuKVkOKVneKVmuKVkOKVneKVmuKVkOKVneKWkeKWkeKVmuKVkOKVkOKVneKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVneKWkeKWkeKWkeKWkeKVmuKVkOKVneKWkeKWkeKWkeKVmuKVkOKVneKWkeKWkeKVmuKVkOKVneKVmuKVkOKVneKWkeKWkeKVmuKVkOKVneKWkeKWkeKWkeKVmuKVkOKVneKWkeKWkeKWkeKWkeKVmuKVkOKVkOKVkOKVkOKVneKWkeKVmuKVkOKVneKWkeKWkeKVmuKVkOKVnVxuICpcbiAqXG4gKlxuICogQHBhY2thZ2UgTWlyZWxlXG4gKiBAYXV0aG9yIE1pcmVsZVxuICogQHZlcnNpb24gMS4wLjBcbiAqXG4gKiBAc2VlIGh0dHBzOi8vdnVlanMub3JnL3YyL2d1aWRlL1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBDT05GSUcgPSB7XG4gICAgbW9kYWw6IHtcbiAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgaGVpZ2h0OiA2MDBcbiAgICB9XG59O1xuXG5jb25zdCBDb21wb3VuZEVkaXRvciA9IFByb2plY3QuZXhwb3J0KCdlZGl0b3InLCBuZXcgSW50ZXJmYWNlKHtcbiAgICByZXF1aXJlczoge1xuICAgICAgICB2dWU6IHRydWUsXG4gICAgICAgIGpxdWVyeTogdHJ1ZVxuICAgIH0sXG4gICAgZWxlbWVudHM6IHtcbiAgICAgICAgdnVlOiBbJyNjb21wb3VuZC1lZGl0b3InXVxuICAgIH0sXG4gICAgdnVlOiB7XG4gICAgICAgIGRlbGltaXRlcnM6IFsneycsICd9J10sXG4gICAgICAgIGVsOiBcIiNjb21wb3VuZC1lZGl0b3JcIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbWFya3VwOiBbXSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBbXSxcbiAgICAgICAgICAgIHRvb2xzOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7fVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy1wbHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge31cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcuLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Rhc2hpY29ucyBkYXNoaWNvbnMtZXh0ZXJuYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogQ29tcG91bmQucGFnZV9vbl9lZGl0X3VybHx8ZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHt9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICByaWdodDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1JlbW92ZSBzZWxlY3RlZCB0ZW1wbGF0ZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Rhc2hpY29ucyBkYXNoaWNvbnMtdHJhc2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbXBvdW5kRWRpdG9yLnZ1ZS50cmFuc3BvcnQoKS5yZW1vdmVTZWxlY3RlZFRlbXBsYXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUmVtb3ZlIHNlbGVjdGVkIHRlbXBsYXRlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy11cGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29tcG91bmRFZGl0b3IudnVlLnRyYW5zcG9ydCgpLnJlbW92ZVNlbGVjdGVkVGVtcGxhdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdWk6IHtcbiAgICAgICAgICAgICAgICBub3RpZnk6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWNvbXBvbmVudD1cIm5vdGlmeVwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXVtkYXRhLWJlaGF2aW9yPVwibm90aWZ5XCJdW2RhdGEtcm9sZT1cIm5vdGlmeVwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbm90aWZ5OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChldmVudHx8e30pLmh0bWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuaHRtbCgoZXZlbnR8fHt9KS5odG1sfHwnTm90IGRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkudGV4dCgoZXZlbnR8fHt9KS50ZXh0fHwnTm90IGRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChFdmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXZlbnR8fHt9KS50aW1lb3V0fHwyNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1jb21wb25lbnQ9XCJzcGlubmVyXCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdW2RhdGEtYmVoYXZpb3I9XCJsb2FkZXJcIl1bZGF0YS1yb2xlPVwibG9hZGVyXCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAnW2RhdGEtY29tcG9uZW50PVwiZXJyb3JcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1iZWhhdmlvcj1cImVycm9yXCJdW2RhdGEtcm9sZT1cImVycm9yXCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWJlaGF2aW9yPVwibGF5b3V0XCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdW2RhdGEtY29tcG9uZW50PVwibGF5b3V0XCJdW2RhdGEtcm9sZT1cImxheW91dFwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0U29ydGFibGU6IGZ1bmN0aW9uIChib29sZWFuPXRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib29sZWFuID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5zb3J0YWJsZShcIm9wdGlvblwiLCBcImRpc2FibGVkXCIsICF0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYm9vbGVhbiA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNvcnRhYmxlKFwib3B0aW9uXCIsIFwiZGlzYWJsZWRcIiwgIWZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldFNlbGVjdGVkOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJGVsZW1lbnQgPSAnW2RhdGEtY29tcG9uZW50PVwiZmllbGQtYm9keVwiXVtkYXRhLXNlbGVjdGVkXSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkoJGVsZW1lbnQpLm1hcCgoaSwgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkoZWxlbWVudCkuYXR0cignZGF0YS1pZCcpIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtb3VudDogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5zZWxlY3RhYmxlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6ICdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZC1ib2R5XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWw6ICdbZGF0YS1jb21wb25lbnQ9XCJ0ZW1wbGF0ZS1jb250cm9sXCJdLFtkYXRhLWNvbXBvbmVudD1cImZpZWxkLWNvbXBvbmVudFwiXScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh1aS5zZWxlY3RlZCkuYXR0cignZGF0YS1zZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gY29udGV4dC5nZXRTZWxlY3RlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW5nOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodWkuc2VsZWN0ZWQpLmF0dHIoJ2RhdGEtc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh1aS51bnNlbGVjdGVkKS5yZW1vdmVBdHRyKCdkYXRhLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQgPSBjb250ZXh0LmdldFNlbGVjdGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGluZzogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHVpLnVuc2VsZWN0ZWQpLnJlbW92ZUF0dHIoJ2RhdGEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNvcnRhYmxlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzOiBcInh5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2xlcmFuY2U6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIl9fY29tcG91bmRfYm94X3BsYWNlaG9sZGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdFdpdGg6IGpRdWVyeSgnW2RhdGEtYmVoYXZpb3I9XCJkcm9wcGFibGVcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl0nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXI6ICdjbG9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC41LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VQbGFjZWhvbGRlclNpemU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0OiA4MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogMCxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiAoZXZlbnQsIHVpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnBsYWNlaG9sZGVyLmhlaWdodCh1aS5pdGVtLmhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS50cmFzaC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudWkudHJhc2gubW91bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3A6IChldmVudCwgdWkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS5sYXlvdXQuc2V0U29ydGFibGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpLnRyYXNoLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUuc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNlbGVjdGFibGUoXCJyZWZyZXNoXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1iZWhhdmlvcj1cImJvZHlcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1jb21wb25lbnQ9XCJib2R5XCJdW2RhdGEtcm9sZT1cImJvZHlcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRyYXNoOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1iZWhhdmlvcj1cInRyYXNoXCJdW2RhdGEtcm9sZT1cInRyYXNoXCJdW2RhdGEtY29tcG9uZW50PVwidHJhc2hcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vdW50OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkodGhpcy5lbGVtZW50KS5kcm9wcGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogalF1ZXJ5KCdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZFwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiAnd3AtbXJsLXRyYXNoLWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJDbGFzczogJ19fY29tcG91bmRfYm94X2FjdGlvbl91bnNldF9ob3ZlcicsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wOiAoZXZlbnQsIHVpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICR0ZW1wbGF0ZSA9IGpRdWVyeSh1aS5oZWxwZXIuY29udGV4dCkuYXR0cignZGF0YS1pZCcpIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5kcmFnZ2FibGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvdW5kRWRpdG9yLnZ1ZS5yZW1vdmVUZW1wbGF0ZSh7dGVtcGxhdGU6ICR0ZW1wbGF0ZX0pLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG1vdW50ZWQ6IGZ1bmN0aW9uIChFdmVudCkge1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgpLnRoZW4oRGF0YSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVpLmxvYWRlci5oaWRlKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkuYm9keS5zaG93KHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkubGF5b3V0Lm1vdW50KHRoaXMpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSkuY2F0Y2goRGF0YSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnVpLmxvYWRlci5oaWRlKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMudWkuZXJyb3Iuc2hvdyh0aGlzKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuXG4gICAgICAgICAgICB1cGRhdGVNYXJrdXA6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1haW4gcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAobmV3IFdQQWpheCgnQ29tcG91bmQtZ2V0TWFya3VwJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDBcbiAgICAgICAgICAgICAgICAgICAgfSkpLnRoZW4oRXZlbnQgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGJ1ZmZlciA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpZCwgdGVtcGxhdGVdIG9mIE9iamVjdC5lbnRyaWVzKEV2ZW50LmRhdGEuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnVmZmVyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZS5wcm9wcy5uYW1lIHx8ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHRlbXBsYXRlLmZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHRlbXBsYXRlLnByb3BzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya3VwID0gJGJ1ZmZlcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShFdmVudC5kYXRhLmRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKEV2ZW50ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoRXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZWRpdFByb3BzOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCAkZm9ybSA9IFByb2plY3QuaW1wb3J0KCdAZm9ybS1wcm9wcycpLnZ1ZTtcbiAgICAgICAgICAgICAgICAkZm9ybS5fX2VkaXRvciA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRmb3JtLm9wZW4oT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwXG4gICAgICAgICAgICAgICAgfSwgZXZlbnQpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluc2VydENvbXBvbmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgJGZvcm0gPSBQcm9qZWN0LmltcG9ydCgnQGZvcm0tY3JlYXRlQ29tcG9uZW50JykudnVlO1xuICAgICAgICAgICAgICAgICRmb3JtLl9fZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZvcm0ub3BlbihPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgfSwgZXZlbnQpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluc2VydFRlbXBsYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCAkZm9ybSA9IFByb2plY3QuaW1wb3J0KCdAZm9ybS1pbnNlcnRUZW1wbGF0ZScpLnZ1ZTtcbiAgICAgICAgICAgICAgICAkZm9ybS5fX2VkaXRvciA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRmb3JtLm9wZW4oT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwLFxuICAgICAgICAgICAgICAgIH0sIGV2ZW50KSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICByZW1vdmVUZW1wbGF0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBXUEFqYXgoJ0NvbXBvdW5kLXJlbW92ZVRlbXBsYXRlJywge1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGV2ZW50LnRlbXBsYXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICByZWxvYWRQYWdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5sYXlvdXQuYmx1cigpXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXJrdXAoKS50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5sYXlvdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgQ29tcG91bmRFZGl0b3IudnVlLnVpLm5vdGlmeS5ub3RpZnkoZmFsc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICc8c3BhbiBjbGFzcz1cImRhc2hpY29ucyBkYXNoaWNvbnMtc2F2ZWRcIj48L3NwYW4+IENoYW5nZXMgaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBzYXZlZCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVpLmxheW91dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdXBkYXRlT3JkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJG9yZGVyID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgZWxlbWVudF0gb2YgT2JqZWN0LmVudHJpZXMoalF1ZXJ5KCdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZFwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXScpKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCAkaWQgPSBqUXVlcnkoZWxlbWVudCkuYXR0cignZGF0YS1pZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3JkZXIucHVzaCgkaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgUmVxdWVzdCA9IG5ldyBXUEFqYXgoJ0NvbXBvdW5kLXNvcnQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBvcmRlcjogJG9yZGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gQ29tcG91bmRFZGl0b3IudnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVNlbGVjdGVkVGVtcGxhdGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVUZW1wbGF0ZSh7dGVtcGxhdGU6IHNlbGYuc2VsZWN0ZWR9KS50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS5sYXlvdXQucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVRlbXBsYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFJlcXVlc3QgPSBuZXcgV1BBamF4KCdDb21wb3VuZC1yZW1vdmVUZW1wbGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBldmVudC50ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdC50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAgX19tZW51QWN0aW9uRWRpdFRlbXBsYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgX19tZXRhRmllbGRDbGFzc19fOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCAkZXZlbnQgPSBldmVudCB8fCB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCAkZWRpdG9yID0gJGV2ZW50LmVkaXRvciB8fCB7fTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYF9fY29tcG91bmRfZmllbGQgY29sLSR7JGVkaXRvci5jb2wgfHwgMTJ9YDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyczoge1xuICAgICAgICAgICAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgd2F0Y2g6IHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xzLnJpZ2h0WzBdLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHMucmlnaHRbMF0uZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZHk6IGZ1bmN0aW9uIChFdmVudCwgJCkge1xuXG4gICAgICAgIC8vIEhvdGtleSByZWdpc3RyYXRpb25cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIEV2ZW50ID0+IHtcblxuICAgICAgICAgICAgY29uc3Qga2V5ID0gRXZlbnQua2V5IHx8ICcnO1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IENvbXBvdW5kRWRpdG9yLnZ1ZSB8fCB7fTtcblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJEZWxldGVcIikge1xuICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0KCkucmVtb3ZlU2VsZWN0ZWRUZW1wbGF0ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG59KSk7Il19
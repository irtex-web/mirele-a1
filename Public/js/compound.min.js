"use strict";const CompoundEditor=Project.export("editor",new Interface({requires:{vue:!0,jquery:!0},elements:{vue:["#compound-editor"]},vue:{delimiters:["{","}"],el:"#compound-editor",data:{markup:[],selected:[],tools:{left:[{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!0,click:function(){}},{title:"...",icon:"dashicons dashicons-plus",href:!1,enabled:!1,click:function(){}},{title:"...",icon:"dashicons dashicons-external",href:Compound.page_on_edit_url||!1,enabled:!0,click:function(){}}],right:[{title:"Remove selected templates",icon:"dashicons dashicons-trash",href:!1,enabled:!1,click:function(){return CompoundEditor.vue.transport().removeSelectedTemplates()}},{title:"Remove selected templates",icon:"dashicons dashicons-update",href:!1,enabled:!0,click:function(){return CompoundEditor.vue.transport().removeSelectedTemplates()}}]},ui:{notify:{element:"[data-component=\"notify\"][data-namespace=\"editor\"][data-behavior=\"notify\"][data-role=\"notify\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},notify:function(a,b){this.show(),"undefined"==typeof(b||{}).html?jQuery(this.element).text((b||{}).text||"Not defined"):jQuery(this.element).html((b||{}).html||"Not defined"),setTimeout(()=>{this.hide()},(b||{}).timeout||2500)}},loader:{element:"[data-component=\"spinner\"][data-namespace=\"editor\"][data-behavior=\"loader\"][data-role=\"loader\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},error:{element:"[data-component=\"error\"][data-namespace=\"editor\"][data-behavior=\"error\"][data-role=\"error\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},layout:{element:"[data-behavior=\"layout\"][data-namespace=\"editor\"][data-component=\"layout\"][data-role=\"layout\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},setSortable:function(a=!0){!0==a?jQuery(this.element).sortable("option","disabled",!1):!1==a&&jQuery(this.element).sortable("option","disabled",!0)},blur:function(){jQuery(this.element).blur(),jQuery(this.element).animate({opacity:.3})},focus:function(){jQuery(this.element).focus(),jQuery(this.element).animate({opacity:1})},getSelected:function(){return jQuery("[data-component=\"field-body\"][data-selected]").map((a,b)=>jQuery(b).attr("data-id")||0)||[]},mount:function(a){const b=this;jQuery(this.element).selectable({filter:"[data-component=\"field-body\"]",cancel:"[data-component=\"template-control\"],[data-component=\"field-component\"]",selected:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},selecting:function(c,d){jQuery(d.selected).attr("data-selected",!0),a.selected=b.getSelected()},unselected:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()},unselecting:function(c,d){jQuery(d.unselected).removeAttr("data-selected"),a.selected=b.getSelected()}}),jQuery(this.element).sortable({axis:"xy",containment:"document",disabled:!0,placeholder:"__compound_box_placeholder",connectWith:jQuery("[data-behavior=\"droppable\"][data-namespace=\"editor\"]"),helper:"clone",opacity:.5,cursor:"move",forcePlaceholderSize:!0,revert:80,delay:0,update:function(){CompoundEditor.vue.updateOrder()},start:(b,c)=>{c.placeholder.height(c.item.height()),a.ui.trash.show(),a.ui.trash.mount()},stop:()=>{a.ui.layout.setSortable(!1),a.ui.trash.hide()}})},reset:function(){CompoundEditor.vue.selected=[],jQuery(this.element).selectable("refresh")}},body:{element:"[data-behavior=\"body\"][data-namespace=\"editor\"][data-component=\"body\"][data-role=\"body\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")}},trash:{element:"[data-behavior=\"trash\"][data-role=\"trash\"][data-component=\"trash\"][data-namespace=\"editor\"]",show:function(){jQuery(this.element).removeClass("hidden")},hide:function(){jQuery(this.element).addClass("hidden")},mount:function(){return jQuery(this.element).droppable({accept:jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"),activeClass:"wp-mrl-trash-active",hoverClass:"__compound_box_action_unset_hover",drop:(a,b)=>{const c=jQuery(b.helper.context).attr("data-id")||!1;b.draggable.remove(),CompoundEditor.vue.removeTemplate({template:c}).then(()=>{})}})}}}},mounted:function(){this.updateMarkup().then(()=>{this.ui.loader.hide(this),this.ui.body.show(this),this.ui.layout.mount(this)}).catch(()=>{this.ui.loader.hide(this),this.ui.error.show(this)})},methods:{updateMarkup:function(){return new Promise((a,b)=>{new WPAjax("Compound-getMarkup",{page:Compound.page_on_edit||0}).then(b=>{var c=[];for(const[a,d]of Object.entries(b.data.data))c.push({name:d.props.name||"default",id:a,fields:d.fields,props:d.props});this.markup=c,a(b.data.data)}).catch(a=>{b(a)})})},editProps:function(a){const b=Project.import("@form-props").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertComponent:function(a){const b=Project.import("@form-createComponent").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},insertTemplate:function(a){const b=Project.import("@form-insertTemplate").vue;return b.__editor=this,b.open(Object.assign({page:Compound.page_on_edit||0},a))},removeTemplate:function(a){return new WPAjax("Compound-removeTemplate",{page:Compound.page_on_edit||0,template:a.template})},reloadPage:function(){this.ui.layout.blur(),this.updateMarkup().then(()=>{this.ui.layout.focus(),CompoundEditor.vue.ui.notify.notify(!1,{html:"<span class=\"dashicons dashicons-saved\"></span> Changes have been successfully saved"})}).catch(()=>{this.ui.layout.focus()})},updateOrder:function(){var a=[];for(const[b,c]of Object.entries(jQuery("[data-component=\"field\"][data-namespace=\"editor\"]"))){const b=jQuery(c).attr("data-id");b&&a.push(b)}new WPAjax("Compound-sort",{page:Compound.page_on_edit||0,order:a})},transport:function(){const a=CompoundEditor.vue;return{removeSelectedTemplates:function(){a.removeTemplate({template:a.selected}).then(()=>{a.ui.layout.reset(),a.reloadPage()})},removeTemplate:function(b){const c=new WPAjax("Compound-removeTemplate",{page:Compound.page_on_edit||0,template:b.template});c.then(()=>{a.reloadPage()}).catch(()=>{})}}},__menuActionEditTemplate:function(){},__metaFieldClass__:function(a){const b=(a||{}).editor||{};return`__compound_field col-${b.col||12}`}},filters:{capitalize:function(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""}},watch:{selected:function(a){this.tools.right[0].enabled=!!(0<a.length)}}},ready:function(){document.addEventListener("keydown",a=>{const b=a.key||"",c=CompoundEditor.vue||{};"Delete"===b&&c.transport().removeSelectedTemplates()})}}));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUUsU0FBVSxDQUFWLENBQWlCLE1BRTNCLENBQUEsQ0FBTyxDQUFHLENBREQsQ0FBSyxFQUFJLEVBQ1IsRUFBTyxNQUFQLEVBQWlCLEVBRkEsQ0FHakMsTUFBUSx3QkFBdUIsQ0FBTyxDQUFDLEdBQVIsRUFBZSxFQUFHLEVBQ3BELENBaElJLENBaFBSLENBbVhELE9BQU8sQ0FBRSxDQUNMLFVBQVUsQ0FBRSxTQUFVLENBQVYsQ0FBaUIsT0FDcEIsQ0FBQSxDQURvQixFQUV6QixDQUFLLENBQUcsQ0FBSyxDQUFDLFFBQU4sRUFGaUIsQ0FHbEIsQ0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFiLEVBQWdCLFdBQWhCLEdBQWdDLENBQUssQ0FBQyxLQUFOLENBQVksQ0FBWixDQUhkLEVBQ04sRUFHdEIsQ0FMSSxDQW5YUixDQTBYRCxLQUFLLENBQUUsQ0FDSCxRQUFRLENBQUUsU0FBVSxDQUFWLENBQWlCLENBRW5CLEtBQUssS0FBTCxDQUFXLEtBQVgsQ0FBaUIsQ0FBakIsRUFBb0IsT0FGRCxJQUNKLENBQWYsQ0FBQSxDQUFLLENBQUMsTUFEYSxDQU0xQixDQVBFLENBMVhOLENBUnFELENBNFkxRCxLQUFLLENBQUUsVUFBb0IsQ0FHdkIsUUFBUSxDQUFDLGdCQUFULENBQTBCLFNBQTFCLENBQXFDLENBQUssRUFBSSxNQUVwQyxDQUFBLENBQUcsQ0FBRyxDQUFLLENBQUMsR0FBTixFQUFhLEVBRmlCLENBR3BDLENBQUksQ0FBRyxjQUFjLENBQUMsR0FBZixFQUFzQixFQUhPLENBSzlCLFFBQVIsR0FBQSxDQUxzQyxFQU10QyxDQUFJLENBQUMsU0FBTCxHQUFpQix1QkFBakIsRUFFUCxDQVJELENBVUgsQ0F6WnlELENBQWQsQ0FBekIsQ0FBdkIiLCJmaWxlIjoiY29tcG91bmQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBXZWxjb21lIHRvIHRoZSBzb3VyY2UgY29kZVxuICpcbiAqIOKWiOKWiOKWiOKVl+KWkeKWkeKWkeKWiOKWiOKWiOKVl+KWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVl+KWkeKWkeKWkeKWkeKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAgICAgICAg4paR4paR4paR4paR4paR4paI4paI4pWX4paR4paI4paI4paI4paI4paI4paI4pWXXG4gKiDilojilojilojilojilZfilpHilojilojilojilojilZHilojilojilZHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZHilpHilpHilpHilpHilpHilojilojilZTilZDilZDilZDilZDilZ0gICAgICAgIOKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVnVxuICog4paI4paI4pWU4paI4paI4paI4paI4pWU4paI4paI4pWR4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4pWR4paR4paR4paR4paR4paR4paI4paI4paI4paI4paI4pWX4paR4paRICAgICAgICDilpHilpHilpHilpHilpHilojilojilZHilZrilojilojilojilojilojilZfilpFcbiAqIOKWiOKWiOKVkeKVmuKWiOKWiOKVlOKVneKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVneKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVlOKVkOKVkOKVneKWkeKWkSAgICAgICAg4paI4paI4pWX4paR4paR4paI4paI4pWR4paR4pWa4pWQ4pWQ4pWQ4paI4paI4pWXXG4gKiDilojilojilZHilpHilZrilZDilZ3ilpHilojilojilZHilojilojilZHilojilojilZHilpHilpHilojilojilZHilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilZcgICAgICAgIOKVmuKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnVxuICog4pWa4pWQ4pWd4paR4paR4paR4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdICAgICAgICDilpHilZrilZDilZDilZDilZDilZ3ilpHilZrilZDilZDilZDilZDilZDilZ3ilpFcbiAqXG4gKiDilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilZfilpHilojilojilojilZfilpHilpHilpHilojilojilojilZfilojilojilZfilojilojilojilZfilpHilpHilojilojilZfilojilojilZfilpHilojilojilojilojilojilojilZfilojilojilojilojilojilojilojilojilZfilojilojilojilojilojilojilZfilpHilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilojilojilZfilpHilojilojilojilojilojilZfilpHilojilojilojilojilojilojilZfilpFcbiAqIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl1xuICog4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4pWU4paI4paI4paI4paI4pWU4paI4paI4pWR4paI4paI4pWR4paI4paI4pWU4paI4paI4pWX4paI4paI4pWR4paI4paI4pWR4pWa4paI4paI4paI4paI4paI4pWX4paR4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4paI4paI4paI4paI4pWU4pWd4paI4paI4paI4paI4paI4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paR4paI4paI4pWR4paR4paR4paI4paI4pWR4paI4paI4paI4paI4paI4paI4pWU4pWdXG4gKiDilojilojilZTilZDilZDilojilojilZHilojilojilZHilpHilpHilojilojilZHilojilojilZHilZrilojilojilZTilZ3ilojilojilZHilojilojilZHilojilojilZHilZrilojilojilojilojilZHilojilojilZHilpHilZrilZDilZDilZDilojilojilZfilpHilpHilpHilojilojilZHilpHilpHilpHilojilojilZTilZDilZDilojilojilZfilojilojilZTilZDilZDilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilpHilojilojilZHilpHilpHilojilojilZHilojilojilZTilZDilZDilojilojilZdcbiAqIOKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWkeKVmuKVkOKVneKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKVmuKWiOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKWiOKWiOKVkeKWkeKWkeKWkeKVmuKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkVxuICog4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWd4paR4paR4paR4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paR4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4paR4paR4paR4pWa4pWQ4pWd4paR4paR4paR4paR4pWa4pWQ4pWQ4pWQ4pWQ4pWd4paR4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWdXG4gKlxuICpcbiAqXG4gKiBAcGFja2FnZSBNaXJlbGVcbiAqIEBhdXRob3IgTWlyZWxlXG4gKiBAdmVyc2lvbiAxLjAuMFxuICpcbiAqIEBzZWUgaHR0cHM6Ly92dWVqcy5vcmcvdjIvZ3VpZGUvXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IENvbXBvdW5kRWRpdG9yID0gUHJvamVjdC5leHBvcnQoJ2VkaXRvcicsIG5ldyBJbnRlcmZhY2Uoe1xuICAgIHJlcXVpcmVzOiB7XG4gICAgICAgIHZ1ZTogdHJ1ZSxcbiAgICAgICAganF1ZXJ5OiB0cnVlXG4gICAgfSxcbiAgICBlbGVtZW50czoge1xuICAgICAgICB2dWU6IFsnI2NvbXBvdW5kLWVkaXRvciddXG4gICAgfSxcbiAgICB2dWU6IHtcbiAgICAgICAgZGVsaW1pdGVyczogWyd7JywgJ30nXSxcbiAgICAgICAgZWw6IFwiI2NvbXBvdW5kLWVkaXRvclwiLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBtYXJrdXA6IFtdLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgdG9vbHM6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLXBsdXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHt9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLXBsdXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7fVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJy4uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy1leHRlcm5hbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBDb21wb3VuZC5wYWdlX29uX2VkaXRfdXJsfHxmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge31cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUmVtb3ZlIHNlbGVjdGVkIHRlbXBsYXRlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZGFzaGljb25zIGRhc2hpY29ucy10cmFzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29tcG91bmRFZGl0b3IudnVlLnRyYW5zcG9ydCgpLnJlbW92ZVNlbGVjdGVkVGVtcGxhdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdSZW1vdmUgc2VsZWN0ZWQgdGVtcGxhdGVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdkYXNoaWNvbnMgZGFzaGljb25zLXVwZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDb21wb3VuZEVkaXRvci52dWUudHJhbnNwb3J0KCkucmVtb3ZlU2VsZWN0ZWRUZW1wbGF0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1aToge1xuICAgICAgICAgICAgICAgIG5vdGlmeToge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAnW2RhdGEtY29tcG9uZW50PVwibm90aWZ5XCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdW2RhdGEtYmVoYXZpb3I9XCJub3RpZnlcIl1bZGF0YS1yb2xlPVwibm90aWZ5XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBub3RpZnk6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGV2ZW50fHx7fSkuaHRtbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5odG1sKChldmVudHx8e30pLmh0bWx8fCdOb3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS50ZXh0KChldmVudHx8e30pLnRleHR8fCdOb3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChldmVudHx8e30pLnRpbWVvdXR8fDI1MDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWNvbXBvbmVudD1cInNwaW5uZXJcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1iZWhhdmlvcj1cImxvYWRlclwiXVtkYXRhLXJvbGU9XCJsb2FkZXJcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICdbZGF0YS1jb21wb25lbnQ9XCJlcnJvclwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXVtkYXRhLWJlaGF2aW9yPVwiZXJyb3JcIl1bZGF0YS1yb2xlPVwiZXJyb3JcIl0nLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAnW2RhdGEtYmVoYXZpb3I9XCJsYXlvdXRcIl1bZGF0YS1uYW1lc3BhY2U9XCJlZGl0b3JcIl1bZGF0YS1jb21wb25lbnQ9XCJsYXlvdXRcIl1bZGF0YS1yb2xlPVwibGF5b3V0XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKHNlbGYsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXRTb3J0YWJsZTogZnVuY3Rpb24gKGJvb2xlYW49dHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW4gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNvcnRhYmxlKFwib3B0aW9uXCIsIFwiZGlzYWJsZWRcIiwgIXRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib29sZWFuID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuc29ydGFibGUoXCJvcHRpb25cIiwgXCJkaXNhYmxlZFwiLCAhZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuM1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcy5lbGVtZW50KS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VsZWN0ZWQ6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkZWxlbWVudCA9ICdbZGF0YS1jb21wb25lbnQ9XCJmaWVsZC1ib2R5XCJdW2RhdGEtc2VsZWN0ZWRdJztcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeSgkZWxlbWVudCkubWFwKChpLCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeShlbGVtZW50KS5hdHRyKCdkYXRhLWlkJykgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vdW50OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLnNlbGVjdGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogJ1tkYXRhLWNvbXBvbmVudD1cImZpZWxkLWJvZHlcIl0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbDogJ1tkYXRhLWNvbXBvbmVudD1cInRlbXBsYXRlLWNvbnRyb2xcIl0sW2RhdGEtY29tcG9uZW50PVwiZmllbGQtY29tcG9uZW50XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHVpLnNlbGVjdGVkKS5hdHRyKCdkYXRhLXNlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQgPSBjb250ZXh0LmdldFNlbGVjdGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpbmc6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh1aS5zZWxlY3RlZCkuYXR0cignZGF0YS1zZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gY29udGV4dC5nZXRTZWxlY3RlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHVpLnVuc2VsZWN0ZWQpLnJlbW92ZUF0dHIoJ2RhdGEtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGNvbnRleHQuZ2V0U2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0aW5nOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkodWkudW5zZWxlY3RlZCkucmVtb3ZlQXR0cignZGF0YS1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gY29udGV4dC5nZXRTZWxlY3RlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuc29ydGFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXM6IFwieHlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWlubWVudDogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvbGVyYW5jZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiX19jb21wb3VuZF9ib3hfcGxhY2Vob2xkZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0V2l0aDogalF1ZXJ5KCdbZGF0YS1iZWhhdmlvcj1cImRyb3BwYWJsZVwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcjogJ2Nsb25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZVBsYWNlaG9sZGVyU2l6ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnQ6IDgwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvdW5kRWRpdG9yLnZ1ZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IChldmVudCwgdWkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWkucGxhY2Vob2xkZXIuaGVpZ2h0KHVpLml0ZW0uaGVpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpLnRyYXNoLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS50cmFzaC5tb3VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcDogKGV2ZW50LCB1aSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpLmxheW91dC5zZXRTb3J0YWJsZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudWkudHJhc2guaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvdW5kRWRpdG9yLnZ1ZS5zZWxlY3RlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkuc2VsZWN0YWJsZShcInJlZnJlc2hcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWJlaGF2aW9yPVwiYm9keVwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXVtkYXRhLWNvbXBvbmVudD1cImJvZHlcIl1bZGF0YS1yb2xlPVwiYm9keVwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJhc2g6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogJ1tkYXRhLWJlaGF2aW9yPVwidHJhc2hcIl1bZGF0YS1yb2xlPVwidHJhc2hcIl1bZGF0YS1jb21wb25lbnQ9XCJ0cmFzaFwiXVtkYXRhLW5hbWVzcGFjZT1cImVkaXRvclwiXScsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMuZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoc2VsZiwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbW91bnQ6IGZ1bmN0aW9uIChzZWxmLCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeSh0aGlzLmVsZW1lbnQpLmRyb3BwYWJsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiBqUXVlcnkoJ1tkYXRhLWNvbXBvbmVudD1cImZpZWxkXCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3M6ICd3cC1tcmwtdHJhc2gtYWN0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3ZlckNsYXNzOiAnX19jb21wb3VuZF9ib3hfYWN0aW9uX3Vuc2V0X2hvdmVyJyxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3A6IChldmVudCwgdWkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJHRlbXBsYXRlID0galF1ZXJ5KHVpLmhlbHBlci5jb250ZXh0KS5hdHRyKCdkYXRhLWlkJykgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLmRyYWdnYWJsZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29tcG91bmRFZGl0b3IudnVlLnJlbW92ZVRlbXBsYXRlKHt0ZW1wbGF0ZTogJHRlbXBsYXRlfSkudGhlbihFdmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24gKEV2ZW50KSB7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWFya3VwKCkudGhlbihEYXRhID0+IHtcblxuICAgICAgICAgICAgICAgIHRoaXMudWkubG9hZGVyLmhpZGUodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5ib2R5LnNob3codGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5sYXlvdXQubW91bnQodGhpcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KS5jYXRjaChEYXRhID0+IHtcblxuICAgICAgICAgICAgICAgIHRoaXMudWkubG9hZGVyLmhpZGUodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5lcnJvci5zaG93KHRoaXMpO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG5cbiAgICAgICAgICAgIHVwZGF0ZU1hcmt1cDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWFpbiByZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIChuZXcgV1BBamF4KCdDb21wb3VuZC1nZXRNYXJrdXAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMFxuICAgICAgICAgICAgICAgICAgICB9KSkudGhlbihFdmVudCA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkYnVmZmVyID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2lkLCB0ZW1wbGF0ZV0gb2YgT2JqZWN0LmVudHJpZXMoRXZlbnQuZGF0YS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidWZmZXIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRlbXBsYXRlLnByb3BzLm5hbWUgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogdGVtcGxhdGUuZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogdGVtcGxhdGUucHJvcHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrdXAgPSAkYnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKEV2ZW50LmRhdGEuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goRXZlbnQgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBlZGl0UHJvcHM6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRmb3JtID0gUHJvamVjdC5pbXBvcnQoJ0Bmb3JtLXByb3BzJykudnVlO1xuICAgICAgICAgICAgICAgICRmb3JtLl9fZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZvcm0ub3BlbihPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDBcbiAgICAgICAgICAgICAgICB9LCBldmVudCkpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5zZXJ0Q29tcG9uZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCAkZm9ybSA9IFByb2plY3QuaW1wb3J0KCdAZm9ybS1jcmVhdGVDb21wb25lbnQnKS52dWU7XG4gICAgICAgICAgICAgICAgJGZvcm0uX19lZGl0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiAkZm9ybS5vcGVuKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiBDb21wb3VuZC5wYWdlX29uX2VkaXQgfHwgMCxcbiAgICAgICAgICAgICAgICB9LCBldmVudCkpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5zZXJ0VGVtcGxhdGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRmb3JtID0gUHJvamVjdC5pbXBvcnQoJ0Bmb3JtLWluc2VydFRlbXBsYXRlJykudnVlO1xuICAgICAgICAgICAgICAgICRmb3JtLl9fZWRpdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZvcm0ub3BlbihPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgfSwgZXZlbnQpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlbW92ZVRlbXBsYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdQQWpheCgnQ29tcG91bmQtcmVtb3ZlVGVtcGxhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IENvbXBvdW5kLnBhZ2Vfb25fZWRpdCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogZXZlbnQudGVtcGxhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlbG9hZFBhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVpLmxheW91dC5ibHVyKClcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hcmt1cCgpLnRoZW4oRXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVpLmxheW91dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBDb21wb3VuZEVkaXRvci52dWUudWkubm90aWZ5Lm5vdGlmeShmYWxzZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJzxzcGFuIGNsYXNzPVwiZGFzaGljb25zIGRhc2hpY29ucy1zYXZlZFwiPjwvc3Bhbj4gQ2hhbmdlcyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHNhdmVkJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChFdmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWkubGF5b3V0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1cGRhdGVPcmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkb3JkZXIgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBlbGVtZW50XSBvZiBPYmplY3QuZW50cmllcyhqUXVlcnkoJ1tkYXRhLWNvbXBvbmVudD1cImZpZWxkXCJdW2RhdGEtbmFtZXNwYWNlPVwiZWRpdG9yXCJdJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0ICRpZCA9IGpRdWVyeShlbGVtZW50KS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRvcmRlci5wdXNoKCRpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBSZXF1ZXN0ID0gbmV3IFdQQWpheCgnQ29tcG91bmQtc29ydCcsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiAkb3JkZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRyYW5zcG9ydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSBDb21wb3VuZEVkaXRvci52dWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2VsZWN0ZWRUZW1wbGF0ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlVGVtcGxhdGUoe3RlbXBsYXRlOiBzZWxmLnNlbGVjdGVkfSkudGhlbihFdmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aS5sYXlvdXQucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZW1vdmVUZW1wbGF0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBSZXF1ZXN0ID0gbmV3IFdQQWpheCgnQ29tcG91bmQtcmVtb3ZlVGVtcGxhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogQ29tcG91bmQucGFnZV9vbl9lZGl0IHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGV2ZW50LnRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgUmVxdWVzdC50aGVuKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKEV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuXG4gICAgICAgICAgICBfX21lbnVBY3Rpb25FZGl0VGVtcGxhdGU6IGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBfX21ldGFGaWVsZENsYXNzX186IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRldmVudCA9IGV2ZW50IHx8IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0ICRlZGl0b3IgPSAkZXZlbnQuZWRpdG9yIHx8IHt9O1xuICAgICAgICAgICAgICAgIHJldHVybiBgX19jb21wb3VuZF9maWVsZCBjb2wtJHskZWRpdG9yLmNvbCB8fCAxMn1gO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICB9LFxuICAgICAgICBmaWx0ZXJzOiB7XG4gICAgICAgICAgICBjYXBpdGFsaXplOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gJydcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB3YXRjaDoge1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHMucmlnaHRbMF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29scy5yaWdodFswXS5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICByZWFkeTogZnVuY3Rpb24gKEV2ZW50LCAkKSB7XG5cbiAgICAgICAgLy8gSG90a2V5IHJlZ2lzdHJhdGlvblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgRXZlbnQgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBFdmVudC5rZXkgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gQ29tcG91bmRFZGl0b3IudnVlIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIkRlbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQoKS5yZW1vdmVTZWxlY3RlZFRlbXBsYXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cbn0pKTsiXX0=